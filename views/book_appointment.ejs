<%- include('header') -%>
<title>Book Appointment</title>

<div class="main-content-appointment">
  <section class="appointment">
    <h2>Book an Appointment</h2>

    <% if (locals.message) { %>
      <div class="flash-message">
        <%- locals.message %>
      </div>
    <% } %>

    <form action="/bookAppointment" method="POST">
      <label for="doctor">Select a Specialist:</label>
      <select id="doctor" name="doctor_id" required>
        <option value="" disabled selected hidden>Choose a specialist</option>
        <% if (Array.isArray(doctors) && doctors.length > 0) { %>
          <% doctors.forEach(doctor => { %>
            <option value="<%= doctor.id %>"><%= doctor.first_name %> <%= doctor.last_name %> (<%= doctor.specialization %>)</option>
          <% }) %>
        <% } else { %>
          <option disabled>No specialists available</option>
        <% } %>
      </select>

      <label for="date">Preferred Appointment Date:</label>
      <input type="date" id="date" name="appointment_date" required>

      <label for="time">Preferred Time:</label>
      <input type="time" id="time" name="appointment_time" required>

      <button type="submit">Book Appointment</button>
    </form>
  </section>
</div>

<%- include('footer') -%>
