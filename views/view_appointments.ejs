<%- include('header') -%>
    <title>Appointment</title>

    <style>
        body {
            background-color: #009B77;
        }
        .login-form {
            background-color: aliceblue;
            margin-top: 5%;
        }
    </style>



    <div class="appointments-page">
        <h1>Your Appointments</h1>
    
        <% if (appointments.length > 0) { %>
            <table class="appointments-table">
                <thead>
                    <tr>
                        <th>Doctor</th>
                        <th>Specialization</th>
                        <th>Date</th>
                        <th>Time</th>
                        <th>Status</th>
                        <!-- <th>Feedback</th> -->
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <% appointments.forEach(appointment => { %>
                        <tr>
                            <td><%= appointment.doctor_first_name %> <%= appointment.doctor_last_name %></td>
                            <td><%= appointment.specialization %></td>
                            <td><%= appointment.appointment_date %></td>
                            <td><%= appointment.appointment_time %></td>
                            <td><%= appointment.status %></td>
                            <!-- <td><%= appointment.feedback ? appointment.feedback : 'No feedback yet' %></td> -->
                            <td>
                                <!-- Update Appointment Form -->
                                <form action="/update_appointment" method="POST">
                                    <input type="hidden" name="appointment_id" value="<%= appointment.id %>">
                                    <input type="date" name="appointment_date" value="<%= appointment.appointment_date %>">
                                    <input type="time" name="appointment_time" value="<%= appointment.appointment_time %>">
                                    <button type="submit">Update</button>
                                </form>
    
                                <!-- Cancel Appointment -->
                                <form action="/cancel_appointment/<%= appointment.id %>" method="POST">
                                    <button type="submit">Cancel</button>
                                </form>
                            </td>
                        </tr>
                    <% }); %>
                </tbody>
            </table>
        <% } else { %>
            <p>You have no appointments booked yet.</p>
        <% } %>
    </div>
    

    <script src="js/script.js"></script>
    
<%- include('footer') -%>